[DEFAULT]
# Disable stderr logging
use_stderr = False
debug = {{ debug }}
host = {{ ansible_host }}
transport_url = {{ magnum_oslomsg_rpc_transport }}://{% for host in magnum_oslomsg_rpc_servers.split(',') %}{{ magnum_oslomsg_rpc_userid }}:{{ magnum_oslomsg_rpc_password }}@{{ host }}:{{ magnum_oslomsg_rpc_port }}{% if not loop.last %},{% else %}/{{ magnum_oslomsg_rpc_vhost }}{% if magnum_oslomsg_rpc_use_ssl | bool %}?ssl=1{% else %}?ssl=0{% endif %}{% endif %}{% endfor %}

[api]
host = {{ ansible_host }}

[docker_registry]
swift_region = {{ magnum_swift_service_region }}
{% if magnum_docker_registry_swift_registry_container is defined %}swift_registry_container = {{ magnum_docker_registry_swift_registry_container }}{% endif %}

[drivers]
# NOTE(mnaser): Remove this once the following bug is fixed
#               https://bugs.launchpad.net/magnum/+bug/1746510
send_cluster_metrics = False

[barbican_client]
region_name = {{ magnum_barbican_service_region }}
endpoint_type = internalURL

[cinder_client]
region_name = {{ magnum_cinder_service_region }}
endpoint_type = internalURL

[database]
connection = mysql+pymysql://{{ magnum_galera_user }}:{{ magnum_galera_password }}@{{ magnum_galera_address }}/{{ magnum_galera_database_name }}?charset=utf8{% if magnum_galera_use_ssl | bool %}&ssl_ca={{ magnum_galera_ssl_ca_cert }}{% endif %}

[glance_client]
region_name = {{ magnum_glance_service_region }}
endpoint_type = internalURL

[heat_client]
region_name = {{ magnum_heat_service_region }}
endpoint_type = internalURL

[keystone_auth]
auth_uri = {{ keystone_service_publicurl }}
www_authenticate_uri = {{ keystone_service_publicurl }}
auth_version = v3
insecure = {{ keystone_service_internaluri_insecure | bool }}
memcached_servers = {{ memcached_servers }}
token_cache_time = 300
auth_type = {{ magnum_keystone_auth_plugin }}
auth_url = {{ keystone_service_internaluri }}
project_domain_name = {{ magnum_service_project_domain_name }}
user_domain_name = {{ magnum_service_user_domain_name }}
project_name = {{ magnum_service_project_name }}
username = {{ magnum_service_user_name }}
password = {{ magnum_service_password }}

[keystone_authtoken]
region_name = {{ magnum_keystone_service_region }}
auth_uri = {{ keystone_service_publicurl }}
www_authenticate_uri = {{ keystone_service_publicurl }}
auth_version = v3
insecure = {{ keystone_service_internaluri_insecure | bool }}
memcached_servers = {{ memcached_servers }}
token_cache_time = 300
auth_type = {{ magnum_keystone_auth_plugin }}
auth_url = {{ keystone_service_internaluri }}
project_domain_name = {{ magnum_service_project_domain_name }}
user_domain_name = {{ magnum_service_user_domain_name }}
project_name = {{ magnum_service_project_name }}
username = {{ magnum_service_user_name }}
password = {{ magnum_service_password }}

[magnum_client]
region_name = {{ magnum_service_region }}
endpoint_type = publicURL

[neutron_client]
region_name = {{ magnum_neutron_service_region }}
endpoint_type = internalURL

[nova_client]
region_name = {{ magnum_nova_service_region }}
endpoint_type = internalURL

[oslo_messaging_notifications]
driver = {{ (magnum_ceilometer_enabled | bool) | ternary('messagingv2', 'noop') }}
transport_url = {{ magnum_oslomsg_notify_transport }}://{% for host in magnum_oslomsg_notify_servers.split(',') %}{{ magnum_oslomsg_notify_userid }}:{{ magnum_oslomsg_notify_password }}@{{ host }}:{{ magnum_oslomsg_notify_port }}{% if not loop.last %},{% else %}/{{ magnum_oslomsg_notify_vhost }}{% if magnum_oslomsg_notify_use_ssl | bool %}?ssl=1{% else %}?ssl=0{% endif %}{% endif %}{% endfor %}

[oslo_messaging_rabbit]
ssl = {{ magnum_oslomsg_rpc_use_ssl }}
rabbit_notification_exchange = magnum
rabbit_notification_topic = notification

[profiler]
enabled = false

[trust]
trustee_domain_admin_password = {{ magnum_trustee_password }}
trustee_domain_admin_name = {{ magnum_trustee_domain_admin_name }}
trustee_domain_name = {{ magnum_trustee_domain_name }}
cluster_user_trust = {{ magnum_cluster_user_trust }}
trustee_keystone_interface= public

[certificates]
cert_manager_type = {{ magnum_cert_manager_type }}
